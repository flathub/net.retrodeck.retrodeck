# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#           ______     _            ______ _____ _____  _   __
#           | ___ \   | |           |  _  \  ___/  __ \| | / /
#           | |_/ /___| |_ _ __ ___ | | | | |__ | /  \/| |/ /
#           |    // _ \ __| '__/ _ \| | | |  __|| |    |    \
#           | |\ \  __/ |_| | | (_) | |/ /| |___| \__/\| |\  \
#           \_| \_\___|\__|_|  \___/|___/ \____/ \____/\_| \_/
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

app-id: net.retrodeck.retrodeck
runtime: org.kde.Platform
runtime-version: '6.10'
sdk: org.kde.Sdk
command: retrodeck

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
#                             Extensions
#                     Additional runtime components
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

add-extensions:
  # Full FFmpeg libraries - Here we wrote 25.08 but it will just pull codec-extras instead as ffmpeg-full 25.08 doesn't exist
  # We will need to remove this and make sure we pull codecs-extras in the nxt version of RetroDECK (0.11.0b)
  # More info: https://github.com/flathub/net.retrodeck.retrodeck/pull/193#issuecomment-3754582526
  org.freedesktop.Platform.ffmpeg-full:
    directory: lib/ffmpeg     
    add-ld-path: . 
    version: '25.08'
    cleanup-commands:
      - mkdir -p "${FLATPAK_DEST}/lib/ffmpeg"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
#                             finish-args
#                         Runtime permissions
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

finish-args:
  # D-Bus: Prevent screen saver from activating
  - --talk-name=org.freedesktop.ScreenSaver

  # D-Bus: Prevent power management (sleep, suspend) actions
  - --talk-name=org.freedesktop.PowerManagement.Inhibit

  # D-Bus: Manage user session (systemd-logind)
  - --talk-name=org.freedesktop.login1.Manager

  # D-Bus: Share IPC namespace for inter-process communication
  - --share=ipc

  # Devices: All device access (e.g., /dev/*, used for various inputs)
  - --device=all

  # Devices: Bluetooth access (used for various inputs)
  - --allow=bluetooth

  # Filesystem: host lets users store the RetroDECK folder on external media (NAS / SD card/ HDD), permission recommended by Flathub maintainers.
  - --filesystem=host

  # Filesystem: Discord (For the components that has an option for Discord Rich Presence)
  - --filesystem=xdg-run/app/com.discordapp.Discord:create

  # Filesystem: GTK‑3 configuration (read‑only)
  - --filesystem=xdg-config/gtk-3.0:ro

  # Filesystem: Steam ROM Manager / Steam Integration
  - --filesystem=xdg-data/Steam:rw
  - --filesystem=~/.var/app/com.valvesoftware.Steam:rw

  # Filesystem: Udev information (read‑only, for inputs)
  - --filesystem=/run/udev:ro

  # GStreamer integration
  - --env=GST_PLUGIN_SYSTEM_PATH=/app/lib32/gstreamer-1.0:/app/lib/gstreamer-1.0:/usr/lib/i386-linux-gnu/gstreamer-1.0:/usr/lib/x86_64-linux-gnu/gstreamer-1.0

  # Gamescope integration
  - --filesystem=xdg-run/gamescope-0:ro
  - --env=LD_LIBRARY_PATH=/usr/lib/extensions/vulkan/gamescope/lib
  
  # Multi‑arch support (32‑bit libs on 64‑bit)
  - --allow=multiarch

  # Network 
  - --share=network
  
  # Environmental Paths: MangoHud, JRE (Java based Systems), Gamescope and OBS (Disabled for now) 
  # - --env=PATH=/usr/lib/extensions/vulkan/MangoHud/bin/:/app/jre/bin/:/usr/lib/extensions/vulkan/gamescope/bin:/usr/lib/extensions/vulkan/OBSVkCapture/bin

  # Sound: PulseAudio, PipeWire
  - --socket=pulseaudio
  - --filesystem=xdg-run/pipewire-0

  # Wayland: Display server access, SDL window‑class, Qt platform selection
  - --socket=wayland
  - --env=SDL_VIDEO_WAYLAND_WMCLASS=net.retrodeck.retrodeck
  - --env=QT_QPA_PLATFORM=wayland;wayland-egl;xcb

  # X11: Display server access, SDL window‑class
  - --socket=x11
  - --env=SDL_VIDEO_X11_WMCLASS=net.retrodeck.retrodeck      

  # Xemu: openSUSE QEMU_AUDIO_DRV fix
  - --unset-env=QEMU_AUDIO_DRV

cleanup:
  # ES-DE
  - /include
  - /share/ffmpeg
  - /lib/cmake
  - /lib/pkgconfig
  - /include
  - /bin/glslangValidator
  - /bin/zip*
  - /bin/zstd*
  - /lib/pkg-config
  - /share/doc
  - /share/gtk-doc # Steam ROM Manager
  - /share/man
  - /src
  - '*.a'
  - '*.la'

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
#                              Modules
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

modules:

  # -------------------------------------------------------------------------
  # RetroDECK version module
  #
  # • If `version` is set to “cooker”, the build will automatically generate a
  #   version tag based on the current date.
  # • Otherwise the exact string placed in the `version` file will be used.
  #   Do **not** prepend a leading “v”.
  # • The version number is stored in `/app/retrodeck/version`.
  #
  # UPDATE STEPS FOR MAIN REPOSITORY
  #   ☐ Update `net.retrodeck.retrodeck.metainfo.xml` with the new version,
  #      release date, and changelog notes.
  # -------------------------------------------------------------------------

  - name: initialization
    buildsystem: simple
    build-commands:
      - |

        # Create the retrodeck directory in the Flatpak destination
        mkdir -p ${FLATPAK_DEST}/retrodeck/

        # Create the version file vital for RetroDECK Framework
        cp version ${FLATPAK_DEST}/retrodeck/version

        # Print the version number to the console
        echo "Version is $(cat ${FLATPAK_DEST}/retrodeck/version)"

        # Safelock to quit the build if version file is missing
        if [ ! -f ${FLATPAK_DEST}/retrodeck/version ]; then
          echo "Version file is missing! Terminating build."
          exit 1
        fi

        # Initializing RO retrodeck config folder
        mkdir -p ${FLATPAK_DEST}/retrodeck/graphics
        mkdir -p ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/
        mkdir -p ${FLATPAK_DEST}/retrodeck/components

    sources:
      - type: dir
        path: .


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
#                     RetroDECK: Generic Modules
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  # -------------------------------------------------------------------------
  # rclone – manage files on cloud storage.
  # -------------------------------------------------------------------------

  - name: rclone
    buildsystem: simple
    build-commands:
      - install -Dm755 rclone "${FLATPAK_DEST}/bin/rclone"
    sources:
      - type: archive
        url: https://github.com/rclone/rclone/releases/download/v1.69.1/rclone-v1.69.1-linux-amd64.zip
        sha256: 231841f8d8029ae6cfca932b601b3b50d0e2c3c2cb9da3166293f1c3eae7d79c

  # -------------------------------------------------------------------------
  # rsync – utility for transferring and synchronizing files.
  # -------------------------------------------------------------------------

  # Source: https://github.com/flathub/com.valvesoftware.Steam.Utility.steamtinkerlaunch/blob/master/modules/rsync.yml
  - name: rsync
    no-autogen: true
    config-opts:
      - --with-included-popt
      - --with-included-zlib
      - --disable-debug
    sources:
      - type: archive
        url: https://download.samba.org/pub/rsync/src/rsync-3.4.1.tar.gz
        sha256: 2924bcb3a1ed8b551fc101f740b9f0fe0a202b115027647cf69850d65fd88c52
        x-checker-data:
          type: anitya
          project-id: 4217
          stable-only: true
          url-template: https://download.samba.org/pub/rsync/src/rsync-$version.tar.gz
    modules:
      - name: xxhash
        no-autogen: true
        make-install-args:
          - PREFIX=${FLATPAK_DEST}
          - DISPATCH=1
        sources:
          - type: git
            url: https://github.com/Cyan4973/xxHash/
            tag: v0.8.3
            commit: e626a72bc2321cd320e953a0ccf1584cad60f363
            x-checker-data:
              type: anitya
              project-id: 17583
              stable-only: true
              tag-template: v$version


  # -------------------------------------------------------------------------
  # p7zip – 7‑Zip compression utilities.
  # -------------------------------------------------------------------------

  - name: p7zip
    no-autogen: true
    sources:
      - type: archive
        url: https://github.com/p7zip-project/p7zip/archive/v17.04/p7zip-v17.04.tar.gz
        sha256: ea029a2e21d2d6ad0a156f6679bd66836204aa78148a4c5e498fe682e77127ef
      - type: shell
        commands:
          - sed -i 's|/usr/local|${FLATPAK_DEST}|g' makefile.common
    post-install:
      - mv "${FLATPAK_DEST}/bin/7za" "${FLATPAK_DEST}/bin/7z"
    cleanup:
      - /man

  # -------------------------------------------------------------------------
  # xmlstarlet – XML processor & toolkit.
  # -------------------------------------------------------------------------

  - name: libxml2-compat
    config-opts:
      - --prefix=/app/compat/xmlstarlet
      - --disable-static
    sources:
      - type: archive
        url: https://download.gnome.org/sources/libxml2/2.13/libxml2-2.13.9.tar.xz
        sha256: a2c9ae7b770da34860050c309f903221c67830c86e4a7e760692b803df95143a
    cleanup:
    - /compat/xmlstarlet/include
    - /compat/xmlstarlet/lib/pkgconfig
    - /compat/xmlstarlet/share

  - name: xmlstarlet
    config-opts:
      - --disable-static-libs
      - --with-libxml-libs-prefix=/app/compat/xmlstarlet/lib
      - --with-libxml-include-prefix=/app/compat/xmlstarlet/include/libxml2
      - --disable-build-docs
    sources:
      - type: archive
        url: https://downloads.sourceforge.net/xmlstar/xmlstarlet-1.6.1.tar.gz
        sha256: 15d838c4f3375332fd95554619179b69e4ec91418a3a5296e7c631b7ed19e7ca
      - type: shell
        commands:
          - cp -p /usr/share/automake-*/config.{sub,guess} .
          - autoreconf -vfi
    post-install:
      # Include xmllint
      - mv "${FLATPAK_DEST}/compat/xmlstarlet/bin/xmllint" "${FLATPAK_DEST}/bin/xmllint"
      # Rename the actual binary
      - mv "${FLATPAK_DEST}/bin/xml" "${FLATPAK_DEST}/bin/xml.bin"
      # Create wrapper script
      - |
        cat > "${FLATPAK_DEST}/bin/xml" << 'EOF'
        #!/bin/sh
        export LD_LIBRARY_PATH="/app/compat/xmlstarlet/lib:${LD_LIBRARY_PATH}"
        exec /app/bin/xml.bin "$@"
        EOF
      - chmod +x "${FLATPAK_DEST}/bin/xml"
      - ln -s "xml" "${FLATPAK_DEST}/bin/xmlstarlet"


  # -------------------------------------------------------------------------
  # jq – JSON processor.
  # -------------------------------------------------------------------------

  - name: jq
    buildsystem: simple
    build-commands:
      - install -Dm755 jq-linux64 ${FLATPAK_DEST}/bin/jq
    sources:
      - type: file
        url: https://github.com/jqlang/jq/releases/download/jq-1.7.1/jq-linux64
        sha256: 5942c9b0934e510ee61eb3e30273f1b3fe2590df93933a93d7c58b81d19c8ff5

  # -------------------------------------------------------------------------
  # yq – YAML processor.
  # -------------------------------------------------------------------------

  - name: yq
    buildsystem: simple
    build-commands:
      - install -Dm755 yq_linux_amd64 ${FLATPAK_DEST}/bin/yq
    sources:
      - type: file
        url: https://github.com/mikefarah/yq/releases/download/v4.45.1/yq_linux_amd64
        sha256: 654d2943ca1d3be2024089eb4f270f4070f491a0610481d128509b2834870049

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
#                     RetroDECK: Internal Modules
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  # -------------------------------------------------------------------------
  # install-components – runs the RetroDECK component installer script retrodeck_builder.sh.
  # -------------------------------------------------------------------------
  
  - name: install-components
    buildsystem: simple
    build-commands:
      - bash automation_tools/install_components.sh --cicd
    sources:
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/azahar.tar.gz
          sha256: 1f5e58809300b46527f0d3f8a1eac7d61fccdb8201c9444d876ecdc7a0552293
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/cemu.tar.gz
          sha256: 73ab6b5e9eae9310e4694b9c2beec3387e57d5810e4c8850782f4e2acafc4986
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/components_version_list.md
          sha256: 43197b7495b7abb40109d14cd1c5c5c8f8529c33f276a468c44648711b6ac073
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/desired_versions.sh
          sha256: f8d98781895de374772cde6e81b9be0055c91b255ec05440e2b6d6de2e4a0645
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/dolphin.tar.gz
          sha256: 7172dcf25c60908dfcb2b0a527d534f4c24d209d18061d4046d1762b2242a884
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/duckstation.tar.gz
          sha256: eb6659478c1fad29b500654cf7feb8bb35b4f1a9e84cb03bf375ae8d0e67fd24
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/es-de.tar.gz
          sha256: 4782dc6964e8c94276afc257b5a11342dbf9815caf9c038bd4ee04843de4c2e4
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/flips.tar.gz
          sha256: a504196f97981725f4bebf65562e72fd4052e8a4555dcabebbd00dbb533ae6b1
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/framework.tar.gz
          sha256: 7dd062b1ee4c80d69eaad55480e8f53e6cdad83c32c31a35431c2e73da52b053
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/gzdoom.tar.gz
          sha256: 1092bd3e36c09ba90d4efd88b499d7b0449cf5ec854324faad3f1d889aaddbb3
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/mame.tar.gz
          sha256: 4ab609a8ce993dc29e3e71c5de40730d8220a093e76747163b83c86b749455b0
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/melonds.tar.gz
          sha256: ab4c5cee883cd5acfe8f1cbb0c43b7cd2b59e0c74194cba74164e595abd484fc
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/openbor.tar.gz
          sha256: fb6f49ea8a5a05f8edc094eda65690260612b5872d03f564a0b90e176bcb514a
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/pcsx2.tar.gz
          sha256: e376e9839d7c8fba8db24fa74ea425009688228036116efa449d66e76b2073cc
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/pico-8.tar.gz
          sha256: 08d3e92c834d0dbe240f4703ea22ddd1b5c2eabfabbafdbd4d9c07e7257183ee
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/portmaster.tar.gz
          sha256: eefbf9162ad92c0ac56253bd3b94540927e6c5ab3bad8f73daae9f8a32ecdf45
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/ppsspp.tar.gz
          sha256: a4352619b6d0028c44c27be45256cc0dcb4bc54ef7924d00b6ad9862e7c8d45c
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/primehack.tar.gz
          sha256: c292d412fbbe235cc3df67fc48e1902826a67d3bf1327cd55e25e3f436a00b0c
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/retroarch.tar.gz
          sha256: 2b3470e234b996e7f0097417156c7893c5404ea7a7777a39939a860e53f9506a
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/rpcs3.tar.gz
          sha256: 550b13eac831d0899a46361faa79cd0640f2c6498c69b118251cf79d867e1ac5
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/ruffle.tar.gz
          sha256: 14e47086aaa639b39c17e90ff2a843a5a0a335c821381f812adf5280ceb0dad0
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/ryubing.tar.gz
          sha256: d16e5b519cf8dca53a6ff5d2b9aa52c7c7db5fd9536a7bcf6a921861eec28585
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/solarus.tar.gz
          sha256: a73ff3d2ddfef9c0d4b2c617a986012a5ad8f719f9c2d12bad44324d20fdd24a
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/steam-rom-manager.tar.gz
          sha256: 5ad011fe3b47fc7446c9a675d9e28ff4bdb2b0ea0e46567cf5f5e75a1ea23728
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/vita3k.tar.gz
          sha256: fe22010041cf478fda1e34c6eb64913ee409cc68ac994f6eda2d7fcdc3af4b3a
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/xemu.tar.gz
          sha256: 36efe9f04455baf6a2ef18210db78042dc6bc33ac22251109fbb62821a0d39c1
          dest: components
        - type: file
          url: https://github.com/RetroDECK/components/releases/download/main-20260123-1707/xroar.tar.gz
          sha256: 39ffb70a5349ca63953393c612d66d374e34eef45fca428549226f4ef276cf94
          dest: components
        - type: git
          url: https://github.com/RetroDECK/RetroDECK
          commit: b0daa649a2eb538b9617456e3c7286b588882fe3

  - name: finisher
    buildsystem: simple
    build-commands:

      # This prevents appstream-compose to fail
      - | 
        if [ -d ${FLATPAK_DEST}/usr ]; then
          mv -n ${FLATPAK_DEST}/usr/** ${FLATPAK_DEST}/share
          rm -rf ${FLATPAK_DEST}/usr
        fi

      # Logo, res, move graphics directory away from default location so splash can be changed after build
      - cp -f res/splash.svg ${FLATPAK_DEST}/retrodeck/graphics/splash.svg
      - cp -rf res/extra_splashes/ ${FLATPAK_DEST}/retrodeck/graphics
      - cp -rf res/folder-iconsets ${FLATPAK_DEST}/retrodeck/graphics
      - cp -f res/icon.svg ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/net.retrodeck.retrodeck.svg
      - cp -f res/icon-configurator.svg ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/net.retrodeck.retrodeck.configurator.svg
      - mv -f -t ${FLATPAK_DEST}/retrodeck res/binding_icons
      - mv -f -t ${FLATPAK_DEST}/retrodeck res/steam_grid

      # Tools
      - mkdir -p ${FLATPAK_DEST}/tools
      - cp -r tools/*.sh ${FLATPAK_DEST}/tools
      - find ${FLATPAK_DEST}/tools -type f \( -name "*.sh" -o -name "*.py" \) -exec chmod +x {} \;

      # Function libraries
      - mkdir -p ${FLATPAK_DEST}/libexec
      - cp -r functions/** "${FLATPAK_DEST}/libexec/"
      - mv "${FLATPAK_DEST}/libexec/retrodeck.sh" "${FLATPAK_DEST}/bin/retrodeck"
      - chmod +x "${FLATPAK_DEST}/bin/retrodeck"

      # Desktop entries
      - install -Dm755 net.retrodeck.retrodeck.desktop ${FLATPAK_DEST}/share/applications/net.retrodeck.retrodeck.desktop
      - install -Dm755 net.retrodeck.retrodeck.Configurator.desktop ${FLATPAK_DEST}/share/applications/net.retrodeck.retrodeck.Configurator.desktop

      # Initializing default emulator configs
      - cp -r config ${FLATPAK_DEST}/retrodeck/config/

      # Creating symlinks for a prettier access
      - ln -s ${FLATPAK_DEST}/tools/configurator.sh ${FLATPAK_DEST}/bin/configurator

      # Install MIME Type
      - install -Dm 644 config/retrodeck/net.retrodeck.retrodeck.mime.xml /app/share/mime/packages/net.retrodeck.retrodeck.mime.xml

      # Installing metainfo
      - install -Dm 644 net.retrodeck.retrodeck.metainfo.xml ${FLATPAK_DEST}/share/metainfo/net.retrodeck.retrodeck.metainfo.xml

      # Removing the retrodeck_function_wrapper.sh in non-cooker versions (aka main)
      - |
        if ! grep -q "cooker" "${FLATPAK_DEST}/retrodeck/version"; then
          rm -f "${FLATPAK_DEST}/tools/retrodeck_function_wrapper.sh"
        fi

      # Fix for Dolphin
      - ln -s "/app/retrodeck/components/dolphin/share/dolphin-emu" "/app/share/dolphin-emu"

    sources:
        - type: git
          url: https://github.com/RetroDECK/RetroDECK
          commit: b0daa649a2eb538b9617456e3c7286b588882fe3
